name: Metrics
on:
  schedule: [{cron: "0 */6 * * *"}]
  workflow_dispatch:
  push: {branches: ["master", "main"]}

jobs:
  github-metrics:
    runs-on: ubuntu-latest
    environment:
      name: production
    permissions:
      contents: write
    steps:
      - uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}
          
          # 用户配置
          user: zzaolv
          template: classic
          base: header, activity, community, repositories, metadata
          config_timezone: Asia/Shanghai
          config_display: large
          
          # 输出配置
          filename: github-metrics.svg
          output_action: commit
          committer_branch: main
          
          # 等距日历 (贡献热力图) - 中文
          plugin_isocalendar: yes
          plugin_isocalendar_duration: half-year
          
          # 编程语言统计 - 中文
          plugin_languages: yes
          plugin_languages_colors: github
          plugin_languages_limit: 8
          plugin_languages_sections: most-used
          plugin_languages_indepth: yes
          plugin_languages_analysis_timeout: 15
          
          # 成就徽章
          plugin_achievements: yes
          plugin_achievements_display: compact
          plugin_achievements_threshold: B
          
          # 活动统计
          plugin_activity: yes
          plugin_activity_limit: 5
          plugin_activity_days: 14
          plugin_activity_filter: all
          
          # ===== 中文本地化配置 =====
          # 启用 PageSpeed 插件（可选，如果需要网站速度测试）
          # plugin_pagespeed: no
          
          # 启用代码习惯统计
          plugin_habits: yes
          plugin_habits_from: 200
          plugin_habits_days: 14
          plugin_habits_charts: yes
          plugin_habits_trim: yes
          
          # 中文翻译覆盖
          extras_css: |
            /* Tokyo Night 主题颜色覆盖 */
            :root {
              --color-calendar-graph-day-bg: #1a1b26;
              --color-calendar-graph-day-L1-bg: #3d59a1;
              --color-calendar-graph-day-L2-bg: #7AA2F7;
              --color-calendar-graph-day-L3-bg: #89ddff;
              --color-calendar-graph-day-L4-bg: #c0caf5;
            }
